<chapter>
  <slide
    scale="1"
    title="">
    <div class="layout-1x1">
      <div class="layout-left">
        <h1>Git Workshop</h1>
        <h3>
          Fin Christensen
          <br>
          Willy Failla
          <br>
          Martin Koppehel
          <br>
          Johann Wagner
          <br>
          Johannes WÃ¼nsche
        </h3>
      </div>

      <div class="layout-right" style="align-self: center;">
        <img src="assets/Git-logo.svg">
      </div>
    </div>
  </slide>

  <slide title="Agenda">
    <history [setup]="agenda"></history>
  </slide>
</chapter>

<chapter>
  <slide
    scale="1"
    title="Why version control?">
    <div class="layout-1">
      <img class="layout-center" src="./assets/version-control.svg">
    </div>
  </slide>

  <slide
    scale="1"
    title="Git">
    <div class="layout-1x1">
      <div class="layout-left">
        <ul>
          <li>Git is a program, not a platform</li>
          <li>Git and GitHub or GitLab are not the same thing</li>
        </ul>
        <div style="text-align: center; margin-top: 1em;">
          <img height="350" src="assets/github-gitlab.png">
        </div>
      </div>
      <div class="layout-right" style="text-align: center;">
        <img height="600" src="assets/git_2x.png">
      </div>
    </div>
  </slide>
</chapter>

<chapter>
  <slide
    scale="1"
    title="Basics: What is a repository?">
    <div class="layout-1x1">
      <div class="layout-left">
        <ul>
          <li>Git projects are hold in <code>repositories</code></li>
          <li>A Git repository holds all the history of the project</li>
          <li>History is hold in the <code>.git</code> folder in your project root</li>
        </ul>
      </div>

      <div class="layout-right" style="text-align: center;">
        <img height="300" src="assets/git-project-layout.svg">
      </div>
    </div>
  </slide>

  <slide
    scale="1"
    title="Basics: What is a branch?">
    <div class="layout-2">
      <div class="layout-top">
        <ul>
          <li>The Git history is managed in <code>branches</code></li>
          <li>Branches are managing <code>commits</code></li>
          <li>Default branch: <code>master</code></li>
        </ul>
      </div>

      <div class="layout-bottom" style="text-align: center;">
        <img height="300" src="assets/git-branches.svg">
      </div>
    </div>
  </slide>

  <slide
    scale="1"
    title="Basics: What is a commit?">
    <div class="layout-1">
      <div class="layout-center" style="text-align: center;">
        <img height="650" src="assets/diff.png">
      </div>
    </div>
  </slide>

  <slide
    scale="1"
    title="Basics: What is a tag?">
    <div class="layout-1x1">
      <div class="layout-left">
        <ul>
          <li>Commits can be marked with a <code>tag</code></li>
          <li>A tag is an unique identifier pointing on a commit</li>
          <li>A tag consists of a name and a message</li>
        </ul>
      </div>

      <div class="layout-right">
        <history [setup]="whatIsATag">
        </history>
      </div>
    </div>
  </slide>

  <slide
    scale="1"
    title="Basics: Summing it Up">
    <div class="layout-1">
      <div class="layout-center">
        <ul>
          <li>A repository is made up of one or more branches</li>
          <li>Branches can exist side by side</li>
          <li>Branches are made up of commits that build the history of your project</li>
          <li>Commits are holding the actual code changes in the history</li>
        </ul>
      </div>
    </div>
  </slide>
</chapter>

<chapter>
  <slide
    scale="1"
    title="Let's start">
    <div class="layout-1x1">
      <div class="layout-left">
        <p><b>Get your laptops!</b></p>
        <p>
          Open <a href="https://workshop.pattig.rocks">https://workshop.pattig.rocks</a> in your web-browser!
        </p>
        <p>
          This will open up a terminal with all tools pre-installed!
        </p>
      </div>

      <div class="layout-right" style="text-align: center; align-self: center;">
        <img height="500" src="assets/workshop-site.png">
      </div>
    </div>
  </slide>

  <slide
    scale="1"
    title="Let's Use Git">
    <div class="layout-1x1">
      <div class="layout-left">
        <div>
          Create a new git repository
        </div>
        <pre>$ git init my-project</pre>
        <div>
          And <code>cd</code> into it
          <pre>$ cd my-project</pre>
        </div>
      </div>
      <div class="layout-right">
        <tty></tty>
      </div>
    </div>
  </slide>

  <slide
    scale="1"
    title="Ok, and now?">
    <div class="layout-2">
      <div class="layout-center-top">
        Configure your environment!
        <pre>$ git config --global user.name "name"
$ git config --global user.email "email"
$ git config --global core.editor nano</pre>

        <div>
          Installed editors: <code>vim</code>, <code>emacs</code>, <code>nano</code>
        </div>
      </div>
      <div class="layout-center-bottom">
        <tty></tty>
      </div>
    </div>
  </slide>

  <slide
    scale="1"
    title="How to Use Nano">
    <div class="layout-1x1">
      <div class="layout-left">
        <ul>
          <li>Open or create a new file: <pre>$ nano my-file.txt</pre></li>
          <li>Save a file: <code>Ctrl+O</code></li>
          <li>Quit Nano <code>Ctrl+X</code></li>
        </ul>
      </div>

      <div class="layout-right">
        <tty></tty>
      </div>
    </div>
  </slide>

  <slide
    scale="1"
    title="I wanna do something!">
    <div class="layout-1x1">
      <div class="layout-left">
        <ul>
          <li>Add a <code>README.md</code> to the git repo</li>
          <li>Stage the new file with <code>git add</code></li>
          <ul>
            <li>Staged files are files that are marked for commit</li>
          </ul>
        </ul>
        <pre>$ nano README.md
$ git status
$ git add README.md</pre>
      </div>

      <div class="layout-right">
        <tty></tty>
      </div>
    </div>
  </slide>

  <slide
    scale="1"
    title="Now tell other people what you did">
    <div class="layout-1">
      <div class="layout-center">
        <pre>Short description in imperative - 70 columns max width ---------------

Long description ------- 80 chars wide -----------------------------------------
# Please enter the commit message for your changes. Lines starting
# with '#' will be ignored, and an empty message aborts the commit.
# On branch master
#
# Initial commit
#
# Changes to be committed:
#	new file:   README.md
#</pre>
      </div>
    </div>
  </slide>

  <slide
    scale="1"
    title="Let's do it together!">
    <div class="layout-1">
      <div class="layout-center">
        <tty></tty>
      </div>
    </div>
  </slide>

  <slide
    scale="1"
    title="How can I stage all files at once?">
    <div class="layout-1x1">
      <div class="layout-left">
        <pre>$ git add -A</pre>
        Will add all unstaged files to the staging area.
      </div>

      <div class="layout-right">
        <tty></tty>
      </div>
    </div>
  </slide>

  <slide
    scale="1"
    title="But I don't want all the files in git!">
    <div class="layout-2">
      <div class="layout-center-top">
        There is magic for that! A file called <code>.gitignore</code>
        <pre>./just?use*bash{{'{'}}globs,here{{'}'}}</pre>
      </div>
      <div class="layout-center-bottom">
        <tty></tty>
      </div>
    </div>
  </slide>
</chapter>

<chapter>
  <slide
    scale="1"
    title="Publishing your changes">
    <div class="layout-1">
      <div class="layout-center" style="text-align: center;">
        <img width="1400" src="assets/remote-comic.svg">
      </div>
    </div>
  </slide>

  <slide
    scale="1"
    title="What is a remote?">
    <div class="layout-1x1">
      <div class="layout-left">
        <ul>
          <li>A connection to another git repository</li>
          <li>Synchronize your changes with other repositories</li>
        </ul>
      </div>

      <div class="layout-right" style="text-align: center;">
        <img src="assets/remote.svg">
      </div>
    </div>
  </slide>

  <slide
    scale="1"
    title="Viewing the state of your repository with tig">
    <div class="layout-1">
      <div class="layout-center">
        <tty></tty>
      </div>
    </div>
  </slide>

  <slide
    scale="1"
    title="Adding a remote to your local repository">
    <div class="layout-2">
      <div class="layout-top">
        <pre>$ git remote add origin ~/.remote
$ git remote -v</pre>
      </div>

      <div class="layout-bottom">
        <tty></tty>
      </div>
    </div>
  </slide>

  <slide
    scale="1"
    title="Pushing your changes to a remote">
    <div class="layout-2">
      <div class="layout-top">
        <pre>$ git push --set-upstream origin master:master
$ git push</pre>
      </div>

      <div class="layout-bottom">
        <tty></tty>
      </div>
    </div>
  </slide>
</chapter>

<chapter>
  <slide
    scale="1"
    title="Getting the content that is on a remote">
    <div class="layout-2">
      <div class="layout-top">
        <pre>$ cd ~/example-100
$ git fetch origin</pre>
      </div>

      <div class="layout-bottom">
        <tty></tty>
      </div>
    </div>
  </slide>

  <slide
    scale="1"
    title="Viewing the changes of the remote">
    <div class="layout-1">
      <div class="layout-center">
        <tty></tty>
      </div>
    </div>
  </slide>

  <slide
    scale="1"
    title="How to get remote changes to your local files">
    <div class="layout-2">
      <div class="layout-top">
        We can fast-forward!
        <pre>$ git merge --ff-only origin/master</pre>
      </div>

      <div class="layout-bottom">
        <tty></tty>
      </div>
    </div>
  </slide>

  <slide
    scale="1"
    title="What if I changed something?">
    <div class="layout-2">
      <div class="layout-top">
        <pre>$ cd ~/example-101
$ git fetch</pre>
      </div>

      <div class="layout-bottom">
        <tty></tty>
      </div>
    </div>
  </slide>

  <slide
    scale="1"
    title="What if I changed something?">
    <div class="layout-1">
      <div class="layout-center">
        <tty></tty>
      </div>
    </div>
  </slide>

  <slide
    scale="1"
    title="What if the same local files were edited as on the remote?">
    <div class="layout-2">
      <div class="layout-top">
        You have to handle the conflicts by yourself!
        <pre>$ cd ~/example-102
$ git fetch
$ git rebase origin/master</pre>
      </div>

      <div class="layout-bottom">
        <tty></tty>
      </div>
    </div>
  </slide>

  <slide
    scale="1"
    title="What if the same local files were edited as on the remote?">
    <div class="layout-1">
      <div class="layout-center">
        <tty></tty>
      </div>
    </div>
  </slide>

  <slide
    scale="1"
    title="Cloning an existing repository">
    <div class="layout-2">
      <div class="layout-center-top">
        <p>
          Cloning means receiving an identical copy of the remote repository
        </p>

        <pre>$ git clone https://github.com/octocat/Hello-World.git
$ git clone https://github.com/octocat/Hello-World.git -b test Hello-World-test</pre>
      </div>
      <div class="layout-center-bottom">
        <tty></tty>
      </div>
    </div>
  </slide>
</chapter>

<chapter>
  <slide
    scale="1"
    title="Ok, and how do I use these branches and tags now?">
    <div class="layout-2">
      <div class="layout-top">
        <ul>
          <li>How do I use branches in my workflow?</li>
          <li>Let's see what else you can do with branches?</li>
        </ul>
      </div>

      <div class="layout-bottom">
        <img src="assets/git-merge-rebase.svg">
      </div>
    </div>
  </slide>

  <slide
    scale="1"
    title="How a merge works">
    <history [setup]="howAMergeWorks"></history>
  </slide>

  <slide
    scale="1"
    title="How a rebase works">
    <div class="layout-1">
      <div class="layout-center" style="text-align: center;">
        <img height="650" src="assets/rebase.svg">
      </div>
    </div>
  </slide>
</chapter>


<chapter>
  <slide
    scale="1"
    title="Why Workflows">

    <div class="layout-center">
      <pre>$ git add -A
$ git commit -m "Done some important work(not tested)"
$ git push --force</pre>
    </div>

  </slide>

  <slide
    scale="1"
    title="Literally 5 minutes later">
    <div class="layout-center" style="text-align: center">
      <img src="../../assets/workflow_burning.png">
    </div>
  </slide>

  <slide
    scale="1"
    title="Centralized Workflow">
    <div style="layout-left">
      <div style="text-align: center">
        <history [setup]="central"></history>
      </div>
    </div>
    <div style="layout-right">
    <ul>
      <li>One branch</li>
      <li>Every commit lands directly on master</li>
    </ul>
  </div>
  </slide>

  <slide
    scale="1"
    title="Workflows">
    <div class="layout-center">
      So what if you want to introduce a new awesome feature? <br>
      Well simple! Push it to the remote!
    </div>
  </slide>

  <slide
    scale="1"
    title="Workflows">
    <div class="layout-center-top">
      <pre>
Updates were rejected because the remote contains work that you do
not have locally. This is usually caused by another repository pushing
to the same ref</pre>
      <div class="layout-center-bottom" style="text-align: center">
        <img src="../../assets/workflow_denied.png">
      </div>
    </div>
  </slide>

  <slide
    scale="1"
    title="Topic Branches">
    Solution? Create branches for new features!
    <history [setup]="topicBranches"></history>
  </slide>

  <slide
    scale="1"
    title="GitFlow Workflow">
    <history [setup]="gitFlowWorkflow"></history>
  </slide>

  <slide
    title="GitFlow Workflow Example">
    <div class="layout-1">
      <tty></tty>
    </div>
  </slide>
</chapter>
<chapter>
  <slide
    title="Forking Workflow">
    <a href="https://github.com/you"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub"></a>
    <ul>
      <li>Done on platforms like gitlab or github</li>
      <li>Allows to create an own copy of another repository</li>
      <li>New repository will be equal to the original repo at the moment of the fork</li>
      <li>More of a Meta-Workflow since a new repo is created which can have it's own workflow</li>
    </ul>
    <br>
    <ul>
      <li>Widely used for cooperation between individual developers</li>
    </ul>
  </slide>

  <slide
    title="Pull requests">
    <a href="https://github.com/you"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_orange_ff7600.png" alt="Fork me on GitHub"></a>
    <div class="layout-center-bottom">
      <img src="../../assets/pull.png">
    </div>
    Provide a way to include the changes done in your own fork into another repository <br><br>
    Similar to merge requests but for forks
  </slide>
</chapter>

<chapter>
  <slide
    scale="1"
    title="Commit Signing"
  >
    <p>You can sign your commits!</p>
    <ul>
      <li>Why? It is quite easy to pretend to be someone else.</li>
      <li>Do you remember how you created your identity?</li>
      <li>You could pretend to be Linus Torvalds.</li>
      <li>You can sign your commits with your GPG key or your S/MIME key.</li>
    </ul>

  </slide>

  <slide
    scale="1"
    title="Commit Signing (GPG)"
  >
    <pre>$ gpg --gen-key</pre>
    <pre>$ gpg --list-secret-keys</pre>
    <pre>$ git config --global user.signingkey 3AA5C34371567BD2</pre>
    <pre>$ git config --global commit.gpgsign true</pre>

  </slide>

  <slide

    scale="1"
    title="Commit Signing"
  >
    <ul>
      <li>Create a <b>signed</b> commit.</li>
    </ul>
    <pre>$ git commit -m "I am going to create a signed commit." -S</pre>

    <ul>
      <li>Verify a <b>signed</b> commit.</li>
    </ul>
    <pre>$ git verify-commit [commit-hash] </pre>
    <blockquote>
      You can only verify a commit, if the public key is in your keyring.
    </blockquote>

  </slide>
  <slide
    scale="1"
    title="Tag Signing"
  >
    <ul>
      <li>Create a <b>signed</b> tag.</li>
    </ul>
    <pre>$ git tag -s v0.13.37 </pre>

    <ul>
      <li>Verify a <b>signed</b> tag.</li>
    </ul>
    <pre>$ git tag -v v0.13.37 </pre>
    <blockquote>
      You can only verify a commit, if the public key is in your keyring.
    </blockquote>
  </slide>
  <slide
    title="Badges!"
  >
    <div class="layout-1">
      <div class="layout-center" style="text-align: center">
        <img src="assets/screenshotsigning.png" width="1038">
      </div>
    </div>

  </slide>
</chapter>

<chapter>
  <!--Willys part order 200->300-->

  <slide order="200" scale="1" title="Rewrite History">
    <div class="layout-1x1">
      <div class="layout-left">
        <ul>
          <li><b>!Danger!</b> advanced topic</li>
          <li>If local history changes it needs to be force pushed</li>
          <li>Force pushing should be avoided</li>
          <li>Result local copy out of sync</li>
        </ul>
      </div>
      <div class="layout-right">
        <img src="assets/git_commit.png" width=750>
      </div>
    </div>
  </slide>

  <slide order="201" scale="1" title="How to Rewrite History?">
    Easiest way is to use:<br>

    <pre>% git remote -v
 origin https://github.com/elementary/calendar.git (fetch)
 origin https://github.com/elementary/calendar.git (push)
% git rebase -i b55e6eb
 successfully rebased and updated refs/heads/master.</pre>

  </slide>

  <slide order="220" scale="1" title="Fixup">
    <pre>pick e842b66 Remove unused match_keycode method (#238)
pick 38ac20f Replace most of used deprecated methods (#237)
pick 12d8409 Translated using Weblate (Thai)
pick 81ef40a Translated using Weblate (Japanese)
pick e2fbfd9 Translated using Weblate (Japanese)
pick 343f2ba Translated using Weblate (Japanese)
pick 470dc17 Translated using Weblate (Japanese)
pick 280a4d9 Translated using Weblate (Portuguese)
pick a6618ed Translated using Weblate (Marathi)</pre>
  </slide>

  <slide order="221" scale="1" title="Fixup">
    <pre>pick e842b66 Remove unused match_keycode method (#238)
pick 38ac20f Replace most of used deprecated methods (#237)
pick 12d8409 Translated using Weblate (Thai)
pick 81ef40a Translated using Weblate (Japanese)
f e2fbfd9 Translated using Weblate (Japanese)
f 343f2ba Translated using Weblate (Japanese)
f 470dc17 Translated using Weblate (Japanese)
pick 280a4d9 Translated using Weblate (Portuguese)
pick a6618ed Translated using Weblate (Marathi)</pre>
  </slide>

  <slide order="asdf" scale="1" title="Fixup">
    <div class="layout-1x1">
      <div class="layout-left">
        <history [setup]="fix1"></history>
      </div>
      <div class="layout-right">
        <history [setup]="fix2"></history>
      </div>
    </div>
  </slide>

  <slide scale="1" title="Fixup">
    <div class="layout-1">
      <div class="layout-center">
        <tty></tty>
      </div>
    </div>
  </slide>

  <slide order="220" scale="1" title="Reword">
    <pre>pick e842b66 Remove unused match_keycode method (#238)
pick 38ac20f Replace most of used deprecated methods (#237)
pick 12d8409 Translated using Weblate (Thai)
pick 81ef40a Translated using Weblate (Japanese)
r e2fbfd9 Translated using Weblate (Japanese)
pick 343f2ba Translated using Weblate (Japanese)
pick 470dc17 Translated using Weblate (Japanese)
pick 280a4d9 Translated using Weblate (Portuguese)
pick a6618ed Translated using Weblate (Marathi)</pre>
  </slide>

  <slide order="230" scale="1" title="Reword">
    <div class="layout-1x1">
      <div class="layout-left">
        <history [setup]="reword1"></history>
      </div>
      <div class="layout-right">
        <history [setup]="reword2"></history>
      </div>
    </div>
  </slide>

  <slide order="240" scale="1" title="Drop">
    <pre>pick e842b66 Remove unused match_keycode method (#238)
pick 38ac20f Replace most of used deprecated methods (#237)
pick 12d8409 Translated using Weblate (Thai)
pick 81ef40a Translated using Weblate (Japanese)
d e2fbfd9 Translated using Weblate (Japanese)
pick 343f2ba Translated using Weblate (Japanese)
pick 470dc17 Translated using Weblate (Japanese)
pick 280a4d9 Translated using Weblate (Portuguese)
pick a6618ed Translated using Weblate (Marathi)</pre>
  </slide>

  <slide order="230" scale="1" title="Drop">
    <div class="layout-1x1">
      <div class="layout-left">
        <history [setup]="reword1"></history>
      </div>
      <div class="layout-right">
        <history [setup]="reword3"></history>
      </div>
    </div>
  </slide>

  <slide order="270" scale="1" title="Cherrypick">
    <div class="layout-1x1">
      <div class="layout-left">
        <history [setup]="cherrypick1"></history>
      </div>
      <div class="layout-right">
        <history [setup]="cherrypick2"></history>
      </div>
    </div>
  </slide>

  <slide scale="1" title="Fixup">
    <div class="layout-1">
      <div class="layout-center">
        <tty></tty>
      </div>
    </div>
  </slide>

  <slide order="250" scale="1" title="Revert">
    <div class="layout-1x1">
      <div class="layout-left">
        <li>Does not change history</li>
        <li>Adds new commit in which it will try to remove changes that were
          applied in the commit that is passed</li>
      </div>
      <div class="layout-right">
        <tty></tty>
      </div>
    </div>
  </slide>

  <slide order="250" scale="1" title="Reset">
    <div class="layout-1x1">
      <div class="layout-left">
        <li>Changes history</li>
        <li>Moves the current HEAD</li>
        <li><code>--soft</code> keeps changes but removes the commit structure</li>
        <li><code>--hard</code> removes changes and commits</li>
      </div>
      <div class="layout-right">
        <tty></tty>
      </div>
    </div>
  </slide>

  <!--end of willys part-->
</chapter>

<!--
     * [1] Add gitignore slide
     * [3] branches / tags
     * [6] merge vs. rebase / workflows
     * [2] checkout/revert/reset/clean
     * [2] rewriting history
     * [?] cherry picking

     rebase: http://jsfiddle.net/fin_ger/74ef9g15/11/
     merge: http://jsfiddle.net/fin_ger/aLbzdgzL/1/

  centralized workflow:
   - one master branch
   - small team sizes
   - rebase
   - linear history

  feature branching:
   - feature development on dedicated branch
   - not disturbing the main code base
   - master should not contain broken code

  forking workflow:
   - each developer has a local and a remote repository

  gitflow workflow:
   - large projects with scheduled release cycles
   - master, hotfix, develop, feature, release
-->
